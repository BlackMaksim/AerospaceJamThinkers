<!DOCTYPE html>
<html>
<head>
    <title>Aerospace Jam Base Station</title>
    <script src="{{ url_for('static', filename='js/socket.io.js') }}"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .sensor-block { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
    </style>
</head>
<body>
    <h1>Aerospace Jam Base Station</h1>
    
    <button id="doAThingButton">Test Button Interaction</button>
    <hr>

    <div class="sensor-block">
        <h3>Barometric Pressure (BMP180)</h3>
        <p>Pressure: <span id="barometricPressure">Loading...</span> hPa</p>
    </div>

    <div class="sensor-block">
        <h3>Accelerometer (MPU-6050)</h3>
        <p>X: <span id="accelX">0</span> | Y: <span id="accelY">0</span> | Z: <span id="accelZ">0</span> m/sÂ²</p>
        
        <h3>Gyroscope (MPU-6050)</h3>
        <p>X: <span id="gyroX">0</span> | Y: <span id="gyroY">0</span> | Z: <span id="gyroZ">0</span> deg</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var socket = io.connect('http://' + document.domain + ':' + location.port);

            socket.on('update_data', function(msg) {
                // BMP180
                document.getElementById('barometricPressure').textContent = msg.barometricPressure;

                // MPU-6050 Accelerometer
                if(msg.accelX !== undefined) {
                    document.getElementById('accelX').textContent = msg.accelX;
                    document.getElementById('accelY').textContent = msg.accelY;
                    document.getElementById('accelZ').textContent = msg.accelZ;
                }

                // MPU-6050 Gyroscope
                if(msg.gyroX !== undefined) {
                    document.getElementById('gyroX').textContent = msg.gyroX;
                    document.getElementById('gyroY').textContent = msg.gyroY;
                    document.getElementById('gyroZ').textContent = msg.gyroZ;
                }
            });

            // Button Logic
            var doAThingButton = document.getElementById('doAThingButton');
            doAThingButton.addEventListener('click', function() {
                socket.emit('do_a_thing', { hello: 'Hello, Aerospace Jam! This is a message being sent from the client to the server.' });
            });
        });
    </script>
</body>
</html>